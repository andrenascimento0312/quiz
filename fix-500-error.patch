## CORREÃ‡ÃƒO DO ERRO 500 - APLICAR MANUALMENTE

### Problema:
Erro 500 (Internal Server Error) no login porque o banco nÃ£o tem os campos 'role' e 'status' necessÃ¡rios.

### Arquivo: server/index.js

Substituir a funÃ§Ã£o startServer() (linhas ~85-98) por:

```javascript
// Inicializar banco de dados e servidor
async function startServer() {
  try {
    console.log('ğŸ”„ Inicializando banco de dados...');
    await initDatabase();
    console.log('âœ… Banco de dados inicializado');
    
    // Executar migraÃ§Ã£o de usuÃ¡rios automaticamente
    try {
      console.log('ğŸ”„ Verificando migraÃ§Ã£o de usuÃ¡rios...');
      const { createConnection, runQuery } = require('./database/init');
      const db = createConnection();
      
      // Tentar adicionar campos se nÃ£o existirem
      try {
        await runQuery(db, `ALTER TABLE admins ADD COLUMN role TEXT DEFAULT 'admin'`);
        console.log('âœ… Campo role adicionado');
      } catch (e) {
        console.log('â„¹ï¸ Campo role jÃ¡ existe');
      }
      
      try {
        await runQuery(db, `ALTER TABLE admins ADD COLUMN status TEXT DEFAULT 'approved'`);
        console.log('âœ… Campo status adicionado');
      } catch (e) {
        console.log('â„¹ï¸ Campo status jÃ¡ existe');
      }
      
      // Criar admin padrÃ£o se nÃ£o existir nenhum
      try {
        const { getQuery } = require('./database/init');
        const adminCount = await runQuery(db, 'SELECT COUNT(*) as count FROM admins');
        
        if (adminCount.count === 0) {
          console.log('ğŸ”„ Criando admin padrÃ£o...');
          const bcrypt = require('bcrypt');
          const passwordHash = await bcrypt.hash(process.env.DEFAULT_ADMIN_PASSWORD || 'admin123', 12);
          
          await runQuery(db, `
            INSERT INTO admins (name, email, password_hash, role, status) 
            VALUES (?, ?, ?, 'superadmin', 'approved')
          `, [
            process.env.DEFAULT_ADMIN_NAME || 'Administrador',
            process.env.DEFAULT_ADMIN_EMAIL || 'admin@quiz.com',
            passwordHash
          ]);
          
          console.log('âœ… Admin padrÃ£o criado:', {
            email: process.env.DEFAULT_ADMIN_EMAIL || 'admin@quiz.com',
            password: process.env.DEFAULT_ADMIN_PASSWORD || 'admin123'
          });
        }
      } catch (adminError) {
        console.error('âš ï¸ Erro ao criar admin padrÃ£o:', adminError.message);
      }
      
      db.close();
      console.log('âœ… MigraÃ§Ã£o verificada');
    } catch (migrationError) {
      console.error('âš ï¸ Aviso na migraÃ§Ã£o:', migrationError.message);
    }
    
    server.listen(PORT, () => {
      console.log(`ğŸš€ Servidor rodando na porta ${PORT}`);
      console.log(`ğŸŒ Frontend: ${process.env.CLIENT_URL || 'http://localhost:5173'}`);
    });
  } catch (error) {
    console.error('âŒ Erro ao inicializar servidor:', error);
    process.exit(1);
  }
}
```

### O que isso faz:
1. âœ… Adiciona campos 'role' e 'status' automaticamente
2. âœ… Cria admin padrÃ£o se nÃ£o existir nenhum
3. âœ… Usa variÃ¡veis de ambiente do Railway
4. âœ… NÃ£o quebra se os campos jÃ¡ existirem

### Credenciais padrÃ£o:
- **Email**: Definido na variÃ¡vel `DEFAULT_ADMIN_EMAIL` (Railway)
- **Senha**: Definida na variÃ¡vel `DEFAULT_ADMIN_PASSWORD` (Railway)
- **Fallback**: admin@quiz.com / admin123

### ApÃ³s aplicar:
1. Commit e push para GitHub
2. Railway farÃ¡ redeploy automÃ¡tico
3. Teste o login novamente
